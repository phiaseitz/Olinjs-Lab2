<md-card id="main-content" >
  <div layout="row">

    <div flex="33">
      <md-toolbar>
        <div class="md-toolbar-tools">
          <h2>
            <span>Playlists</span>
          </h2>
        </div>
      </md-toolbar>

      <md-list flex layout-padding="10px">
        <md-list-item md-ink-ripple
            class="md-clickable"
            ng-repeat="playlist in userPlaylists"
            ng-click="showPlaylist(playlist)"
            ng-class="{tracked: playlist.isTracked}">
          <div class="md-list-item-text" layout="column">
            <p>{{ playlist.name }}</p>
          </div>
          <md-divider ng-if="!$last"></md-divider>
        </md-list-item>      

      </md-list>
    </div>

    <div flex="66">
      <md-toolbar>
        <div ng-switch="currentPlaylist.isTracked">
          <div ng-switch-when="false">
            <div class="md-toolbar-tools">
              <h2>
                <span><b>{{currentPlaylist.name}}</b></span>
              </h2>
              <span flex=""></span>            
              <md-button
                  class="md-raised"
                  type="button"
                  aria-label="Track"
                  ng-click="trackPlaylist(currentPlaylist)">
                Track
              </md-button>
            </div>
          </div>
          <div ng-switch-when="true">
            <div class="md-toolbar-tools">
              <h2>
                <span><b>{{currentPlaylist.name}}</b></span>
              </h2>
              <span flex=""></span>            
              <md-button
                  class="md-raised"
                  type="button"
                  aria-label="Untrack"
                  ng-click="untrackPlaylist(currentPlaylist)">
                Untrack
              </md-button>
            </div>
          </div>
        </div>
      </md-toolbar>

      <div class="action-button-container" ng-if="currentPlaylist.isTracked">
        <md-toolbar style="background-color: gray;">
          <div class="md-toolbar-tools">
            <span flex=""></span>             
            <md-select
                ng-model="user.state"
                aria-label="States">
              <md-option ng-repeat="state in currentPlaylist.states" value="{{$index}}">
                {{state.date}}
              </md-option>
            </md-select>
            <md-button class="md-raised md-primary" type="button" aria-label="Revert">
              Revert
            </md-button>
          </div>
        </md-toolbar>
      </div>

      
      <md-list flex layout-padding="10px">
        <md-list-item ng-repeat="track in currentPlaylist.tracks.items">
          <div class="md-list-item-text" layout="column">
            <p>{{track.track.name}}</p>
          </div>
          <md-divider ng-if="!$last"></md-divider>
        </md-list-item>    
      </md-list>
    </div>

  </div>
</md-card>



<div 
  class="container-card"
  layout="row">
  <div 
    id = playlist-buttons
    layout="column">

      <h3>Your Playlists</h3>
      <div ng-repeat="playlist in userPlaylists" >
          <button 
            ng-click="showPlaylist(playlist)"
            id = "playlist-{{playlist.id}}"
            class = "playlist-button"
            ng-class="{tracked: playlist.isTracked}">
            {{playlist.name}}
          </button>
      </div>

  </div>

  <div id = "playlist-content">
    <div id= "current-playlist" ng-model="currentPlaylist" ng-if="currentPlaylist.name">
      <md-list>
        <div class="playlist-header" ng-switch="currentPlaylist.isTracked">
          <h3>{{currentPlaylist.name}}</h3>
          
          <div
            ng-model="currentPlaylist"
            ng-switch-when="true"
            ng-click="untrackPlaylist(currentPlaylist)"> 
              <button>
                Untrack Playlist
              </button>
              <button>
                See Revision History
              </button>
          </div>
          
          <div
            ng-model="currentPlaylist"
            ng-switch-when="false"
            ng-click="trackPlaylist(currentPlaylist)"> 
              <button>
                Track Playlist
              </button>
          </div>
          
        </div>
        
        <md-divider ></md-divider>

        <div ng-repeat = "track in currentPlaylist.tracks.items">
          <md-list-item >
            <md-subheader> {{track.track.name}} </md-subheader>
          </md-list-item>
          <md-divider ></md-divider>
        </div>
      </md-list>  
    </div>
  </div>
</div>